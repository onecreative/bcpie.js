'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _child_process = require('child_process');

var _child_process2 = _interopRequireDefault(_child_process);

var _which = require('which');

var _which2 = _interopRequireDefault(_which);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Created by mwarapitiya on 10/23/16.
 */

function run(command, callback) {
	(0, _which2.default)(command.cmd, function (err, cmdpath) {
		if (err) {
			callback(new Error('Can\'t yarn! `' + command.cmd + '` doesn\'t seem to be installed.'));
			return;
		}
		var cmd = _child_process2.default.spawn(cmdpath, command.args, { stdio: 'inherit', cwd: command.cwd || process.cwd() });
		cmd.on('close', function (code) {
			if (code !== 0) {
				return callback(new Error(command.cmd + ' exited with non-zero code ' + code));
			}
			callback();
		});
	});
}

exports.default = { run: run };
module.exports = exports['default'];